<Window x:Class="_1135_15092025_NVE.View.ZapisAthlete"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:_1135_15092025_NVE.View"
         xmlns:vm="clr-namespace:_1135_15092025_NVE.VM"
        mc:Ignorable="d"
        Title="ZapisAthlete" Height="450" Width="800"
        DataContext="{DynamicResource vm}">
    <Window.Resources>
        <vm:ZapisAthleteVM x:Key="vm"/>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <ListView Grid.RowSpan="2" ItemsSource="{Binding Workouts}" SelectedItem="{Binding SelectedWorkout}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Название" DisplayMemberBinding="{Binding Title}"/>
                    <GridViewColumn Header="Дата" DisplayMemberBinding="{Binding DateTime, StringFormat=dd.MM.yyyy}"/>
                    <GridViewColumn Header="Время" DisplayMemberBinding="{Binding DateTime, StringFormat=mm:hh}"/>
                    <GridViewColumn Header="Длительность" DisplayMemberBinding="{Binding Duration, StringFormat={}{0} минут}"/>
                    <GridViewColumn Header="Тип" DisplayMemberBinding="{Binding Type}"/>
                </GridView>
            </ListView.View>
        </ListView>

        <ListView Grid.RowSpan="2" Grid.Column="2"  ItemsSource="{Binding Athletes}" SelectedItem="{Binding SelectedAthlete}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Имя" DisplayMemberBinding="{Binding Name}"/>
                    <GridViewColumn Header="Фамилия" DisplayMemberBinding="{Binding LastName}"/>
                    <GridViewColumn Header="Дата рождения" DisplayMemberBinding="{Binding DateTime, StringFormat=mm:hh}"/>
                    <GridViewColumn Header="Категория" DisplayMemberBinding="{Binding Category}"/>
                    <GridViewColumn Header="Уровень подготовки" DisplayMemberBinding="{Binding Level}"/>
                </GridView>
            </ListView.View>
        </ListView>

        <ListView Grid.Column="1"  ItemsSource="{Binding AthleteWorkouts}" SelectedItem="{Binding SelectedAthleteWorkout}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Имя атлета" DisplayMemberBinding="{Binding Athlete.Name}"/>
                    <GridViewColumn Header="Фамилия атлета" DisplayMemberBinding="{Binding Athlete.LastName}"/>
                    <GridViewColumn Header="Название тренировки" DisplayMemberBinding="{Binding Workout.Title}"/>
                    <GridViewColumn Header="Оценка" DisplayMemberBinding="{Binding Mark}"/>
                    <GridViewColumn Header="Комментарий" DisplayMemberBinding="{Binding Comment}"/>
                </GridView>
            </ListView.View>
        </ListView>

        <StackPanel Grid.Column="1" Grid.Row="1">
            <Label Content="ID Атлета"/>
            <TextBox Text="{Binding SelectedAthlete.Id}"/>
            <Label Content="ID тренировки"/>
            <TextBox Text="{Binding SelectedWorkout.Id}"/>
            <Label Content="Оценка"/>
            <TextBox Text="{Binding SelectedAthleteWorkout.Mark}"/>
            <Label Content="Комментарий"/>
            <TextBox Text="{Binding SelectedAthleteWorkout.Comment}"/>
            <Button Content="Связать" Command="{Binding Connecting}"/>
            <Button Content="Зарегистрировать нового пользователя" Command="{Binding Zareg}"/>
            <Button Content="Просмотреть тренировки" Command="{Binding Trenir}"/>
        </StackPanel>
    </Grid>
</Window>
